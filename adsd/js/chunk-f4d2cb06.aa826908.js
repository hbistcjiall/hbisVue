(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f4d2cb06"],{"07e3":function(t,e){var a={}.hasOwnProperty;t.exports=function(t,e){return a.call(t,e)}},"1bc3":function(t,e,a){var n=a("f772");t.exports=function(t,e){if(!n(t))return t;var a,i;if(e&&"function"==typeof(a=t.toString)&&!n(i=a.call(t)))return i;if("function"==typeof(a=t.valueOf)&&!n(i=a.call(t)))return i;if(!e&&"function"==typeof(a=t.toString)&&!n(i=a.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"1ec9":function(t,e,a){var n=a("f772"),i=a("e53d").document,r=n(i)&&n(i.createElement);t.exports=function(t){return r?i.createElement(t):{}}},"25eb":function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},"294c":function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},"35e8":function(t,e,a){var n=a("d9f6"),i=a("aebd");t.exports=a("8e60")?function(t,e,a){return n.f(t,e,i(1,a))}:function(t,e,a){return t[e]=a,t}},"3fd1":function(t,e,a){"use strict";a.r(e),a("386d");var n=a("e814"),i=a.n(n),r=(a("c5f6"),{name:"xyhmxlb",data:function(){return{loading:!0,updModal:!1,downloadUrl:"",downloadData:{},xyhmxlbData:{beginTime:"",endTime:"",protocolYear:"",steelMills:"",varieties:"",page:"0",limit:"10"},begin:"",end:"",year:"2019",protocolAccountId:"",dataCount:0,pageSize:10,xia:0,columns12:[{type:"selection",width:50,align:"center"},{title:"序号",align:"center",type:"index",width:60},{title:"上传时间",align:"center",width:150,key:"UPLOADTIME"},{title:"协议年份",align:"center",key:"PROTOCOLYEAR"},{title:"用户名称(全称)",align:"center",key:"ACCOUNTNAME",width:130},{title:"品种",align:"center",key:"VARIETIES",width:70},{title:"主销售区域",align:"center",key:"MAINSALESREGIONAL"},{title:"辅助销售区域一",align:"center",key:"AIDEDSALESREGIONALONE"},{title:"辅助销售区域二",align:"center",key:"AIDEDSALESREGIONALTWO"},{title:"钢厂",align:"center",key:"STEELMILLS",width:70},{title:"年协议量(吨)",align:"center",key:"ANNUALAGREEMENTVOLUME",render:function(t,e){return e.row[e.column.key]=null==e.row[e.column.key]?"0.00":e.row[e.column.key],t("span",Number(e.row[e.column.key]).toFixed(2))}},{title:"操作",slot:"action",align:"center",width:"150px"}],fecthdata6:[],resDatas:[],plDelectData:[],updformValidate:{accountName:"",aidedSalesRegionalOne:"",aidedSalesRegionalTwo:"",annualAgreementVolume:"",mainSalesRegional:"",protocolAccountId:"",protocolYear:"",steelMills:"",varieties:""},updYear:"",updruleValidate:{annualAgreementVolume:[{required:!0,message:"年协议量(吨)",trigger:"blur"}],Mainsalesarea:[{required:!0,message:"主销售区域",trigger:"blur"}],Yearofagreement:[{required:!0,message:"协议年份",trigger:"blur"}],accountName:[{required:!0,message:"用户名称",trigger:"blur"}],mainSalesRegional:[{required:!0,message:"主销售区域",trigger:"blur"}],varieties:[{required:!0,message:"品种",trigger:"blur"}],steelMills:[{required:!0,message:"钢厂",trigger:"blur"}]}}},created:function(){this.handleListApproveHistory()},methods:{handleListApproveHistory:function(){var t=this;this.year&&(this.xyhmxlbData.protocolYear=new Date(this.year).getFullYear()),this.begin&&(this.xyhmxlbData.beginTime=this.utils.format(this.begin)),this.end&&(this.xyhmxlbData.endTime=this.utils.format(this.end)),fetch(this.$store.state.fetchPath+"/protocolAccountDetails/list",{method:"POST",headers:this.$store.state.fetchHeader,body:this.utils.formatParams(this.xyhmxlbData),credentials:"include"}).then(function(e){if(200==e.status)return e.text();t.$Message.error("请求失败！")}).then(function(e){e=e&&0<e.length?JSON.parse(e):[],t.resDatas=e.data;for(var a=0;a<t.resDatas.length;a++)t.resDatas[a].ANNUALAGREEMENTVOLUME=Number(t.resDatas[a].ANNUALAGREEMENTVOLUME).toFixed(2);t.dataCount=i()(e.count),t.pageSize=i()(e.pageSize),t.dataCount<t.pageSize?t.fecthdata6=t.resDatas:t.fecthdata6=t.resDatas.slice(0,t.pageSize),t.downLoad(),t.loading=!1})},changepage:function(t){this.xyhmxlbData.page=t,this.handleListApproveHistory()},handlePageSize:function(t){this.xyhmxlbData.limit=t,this.search()},serTime:function(t){this.Dates=t,""==this.Dates[0]?(this.xyhmxlbData.beginTime="",this.xyhmxlbData.endTime=""):(this.xyhmxlbData.beginTime=this.Dates[0],this.xyhmxlbData.endTime=this.Dates[1])},search:function(){this.loading=!0,this.handleListApproveHistory()},clearall:function(){this.xyhmxlbData.beginTime="",this.xyhmxlbData.endTime="",this.xyhmxlbData.steelMills="",this.xyhmxlbData.limit="10",this.xyhmxlbData.page="1",this.xyhmxlbData.protocolYear="",this.xyhmxlbData.varieties="",this.begin="",this.end="",this.year=""},checkedel:function(){this.xyhmxlbData.varieties="",this.year="",this.xyhmxlbData.steelMills=""},downLoad:function(){this.downloadData.beginTime=this.xyhmxlbData.beginTime,this.downloadData.endTime=this.xyhmxlbData.endTime,this.downloadData.protocolYear=this.xyhmxlbData.protocolYear,this.downloadData.varieties=this.xyhmxlbData.varieties,this.downloadData.steelMills=this.xyhmxlbData.steelMills,this.downloadUrl=this.$store.state.fetchPath+"/protocolAccountDetails/exportlist?"+this.utils.formatParams(this.downloadData)},remove:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除吗？",onOk:function(){e.protocolAccountId=t.PROTOCOLACCOUNTID,fetch(e.$store.state.fetchPath+"/protocolAccountDetails/delete",{method:"POST",headers:e.$store.state.fetchHeader,body:"protocolAccountId="+e.protocolAccountId,credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(){e.handleListApproveHistory()})}})},updD:function(t){this.updModal=!0,this.updformValidate.protocolAccountId=t.PROTOCOLACCOUNTID,this.updYear=t.PROTOCOLYEAR,this.updformValidate.accountName=t.ACCOUNTNAME,this.updformValidate.varieties=t.VARIETIES,this.updformValidate.mainSalesRegional=t.MAINSALESREGIONAL,this.updformValidate.aidedSalesRegionalOne=t.AIDEDSALESREGIONALONE,this.updformValidate.aidedSalesRegionalTwo=t.AIDEDSALESREGIONALTWO,this.updformValidate.steelMills=t.STEELMILLS,this.updformValidate.annualAgreementVolume=t.ANNUALAGREEMENTVOLUME},updok:function(){var t=this;this.updYear&&(this.updformValidate.protocolYear=new Date(this.updYear).getFullYear()),fetch(this.$store.state.fetchPath+"/protocolAccountDetails/update",{method:"POST",headers:this.$store.state.fetchHeader,body:this.utils.formatParams(this.updformValidate),credentials:"include"}).then(function(e){if(200==e.status)return e.text();t.$Message.error("请求失败！")}).then(function(){t.handleListApproveHistory()})},pldelect:function(){var t=this;this.$Modal.confirm({title:"提示",content:"确认删除吗？",onOk:function(){for(var e=t.$refs.table.getSelection(),a=0;a<e.length;a++)t.plDelectData.push(e[a].PROTOCOLACCOUNTID);fetch(t.$store.state.fetchPath+"/protocolAccountDetails/deleteList",{method:"POST",headers:t.$store.state.fetchHeader,body:"idList="+t.plDelectData,credentials:"include"}).then(function(e){if(200==e.status)return e.text();t.$Message.error("请求失败！")}).then(function(){t.handleListApproveHistory()})}})}}}),o=(a("cec2"),a("2877")),l=Object(o.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{attrs:{"label-width":80}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"产品类别:"}},[a("Select",{model:{value:t.xyhmxlbData.varieties,callback:function(e){t.$set(t.xyhmxlbData,"varieties",e)},expression:"xyhmxlbData.varieties"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),a("Option",{attrs:{value:"热板"}},[t._v("热板")]),a("Option",{attrs:{value:"冷板"}},[t._v("冷板")]),a("Option",{attrs:{value:"宽厚板"}},[t._v("宽厚板")]),a("Option",{attrs:{value:"棒线"}},[t._v("棒线")]),a("Option",{attrs:{value:"型带"}},[t._v("型带")])],1)],1)],1),a("Col",{attrs:{span:"2"}},[a("FormItem",{attrs:{label:"上传时间:"}},[a("DatePicker",{staticStyle:{width:"175px"},attrs:{type:"datetimerange",format:"yyyy-MM-dd",placeholder:"请选择上传时间"},on:{"on-change":t.serTime}})],1)],1),a("Col",{staticStyle:{"margin-left":"160px"},attrs:{span:"3"}},[a("FormItem",{attrs:{label:"协议年份:"}},[a("DatePicker",{staticStyle:{width:"100px"},attrs:{type:"year"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1)],1),a("Col",{staticStyle:{"margin-left":"20px"},attrs:{span:"4"}},[a("FormItem",{attrs:{label:"钢厂:"}},[a("Select",{model:{value:t.xyhmxlbData.steelMills,callback:function(e){t.$set(t.xyhmxlbData,"steelMills",e)},expression:"xyhmxlbData.steelMills"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),a("Option",{attrs:{value:"唐钢"}},[t._v("唐钢")]),a("Option",{attrs:{value:"邯钢"}},[t._v("邯钢")]),a("Option",{attrs:{value:"宣钢"}},[t._v("宣钢")]),a("Option",{attrs:{value:"承钢"}},[t._v("承钢")]),a("Option",{attrs:{value:"舞钢"}},[t._v("舞钢")])],1)],1)],1),a("Col",{staticStyle:{float:"right"},attrs:{span:"8"}},[a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.clearall}},[t._v("清空")]),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.pldelect}},[t._v("批量删除")]),a("a",{attrs:{href:t.downloadUrl}},[a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[t._v("导出")])],1)],1)],1)],1),a("Table",{ref:"table",staticStyle:{"margin-top":"20px"},attrs:{loading:t.loading,border:"",stripe:"",columns:t.columns12,data:t.fecthdata6},scopedSlots:t._u([{key:"name",fn:function(e){var n=e.row;return[a("strong",[t._v(t._s(n.name))])]}},{key:"action",fn:function(e){var n=e.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small"},on:{click:function(e){return t.updD(n)}}},[t._v("修改")]),a("Button",{staticStyle:{background:"#ff6969",color:"#fff"},attrs:{size:"small"},on:{click:function(e){return t.remove(n)}}},[t._v("删除")])]}}])}),a("Page",{staticClass:"paging",staticStyle:{"margin-top":"20px"},attrs:{total:t.dataCount,"page-size":t.pageSize,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changepage,"on-page-size-change":t.handlePageSize}}),a("Modal",{attrs:{title:"协议户编辑",closable:!1},on:{"on-ok":t.updok},model:{value:t.updModal,callback:function(e){t.updModal=e},expression:"updModal"}},[a("Form",{attrs:{model:t.updformValidate,rules:t.updruleValidate,"label-width":90}},[a("FormItem",{attrs:{label:"协议年份",prop:"Yearofagreement"}},[a("DatePicker",{attrs:{type:"year"},model:{value:t.updYear,callback:function(e){t.updYear=e},expression:"updYear"}})],1),a("FormItem",{attrs:{label:"用户名称",prop:"accountName"}},[a("Input",{attrs:{placeholder:"请输入用户名称"},model:{value:t.updformValidate.accountName,callback:function(e){t.$set(t.updformValidate,"accountName",e)},expression:"updformValidate.accountName"}})],1),a("FormItem",{attrs:{label:"品种",prop:"varieties"}},[a("Select",{model:{value:t.updformValidate.varieties,callback:function(e){t.$set(t.updformValidate,"varieties",e)},expression:"updformValidate.varieties"}},[a("Option",{attrs:{value:"热板"}},[t._v("热板")]),a("Option",{attrs:{value:"冷板"}},[t._v("冷板")]),a("Option",{attrs:{value:"宽厚板"}},[t._v("宽厚板")]),a("Option",{attrs:{value:"棒线"}},[t._v("棒线")]),a("Option",{attrs:{value:"型带"}},[t._v("型带")])],1)],1),a("FormItem",{attrs:{label:"主销售区域",prop:"Mainsalesarea"}},[a("Input",{attrs:{placeholder:"请输入主销售区域"},model:{value:t.updformValidate.mainSalesRegional,callback:function(e){t.$set(t.updformValidate,"mainSalesRegional",e)},expression:"updformValidate.mainSalesRegional"}})],1),a("FormItem",{attrs:{label:"辅助销售区域一"}},[a("Input",{attrs:{placeholder:"请输入辅助销售区域一"},model:{value:t.updformValidate.aidedSalesRegionalOne,callback:function(e){t.$set(t.updformValidate,"aidedSalesRegionalOne",e)},expression:"updformValidate.aidedSalesRegionalOne"}})],1),a("FormItem",{attrs:{label:"辅助销售区域二"}},[a("Input",{attrs:{placeholder:"请输入辅助销售区域二"},model:{value:t.updformValidate.aidedSalesRegionalTwo,callback:function(e){t.$set(t.updformValidate,"aidedSalesRegionalTwo",e)},expression:"updformValidate.aidedSalesRegionalTwo"}})],1),a("FormItem",{attrs:{label:"钢厂",prop:"steelMills"}},[a("Select",{model:{value:t.updformValidate.steelMills,callback:function(e){t.$set(t.updformValidate,"steelMills",e)},expression:"updformValidate.steelMills"}},[a("Option",{attrs:{value:"唐钢"}},[t._v("唐钢")]),a("Option",{attrs:{value:"邯钢"}},[t._v("邯钢")]),a("Option",{attrs:{value:"宣钢"}},[t._v("宣钢")]),a("Option",{attrs:{value:"承钢"}},[t._v("承钢")]),a("Option",{attrs:{value:"舞钢"}},[t._v("舞钢")])],1)],1),a("FormItem",{attrs:{label:"年协议量(吨)",prop:"annualAgreementVolume"}},[a("Input",{attrs:{placeholder:"请输入年协议量"},model:{value:t.updformValidate.annualAgreementVolume,callback:function(e){t.$set(t.updformValidate,"annualAgreementVolume",e)},expression:"updformValidate.annualAgreementVolume"}})],1)],1)],1)],1)},[],!1,null,"0a70091c",null).exports,s=(a("6b54"),{data:function(){return{file:[],uploadFile:[]}},methods:{handleUpload:function(t){var e=Math.random().toString().substr(2);return t.keyID=e,this.file.push(t),this.uploadFile.push(t),!1},delectFile:function(t){this.file=this.file.filter(function(e){return e.keyID!=t}),this.uploadFile=this.uploadFile.filter(function(e){return e.keyID!=t})},upload:function(){if(0===this.uploadFile.length)return this.$Message.error("未选择上传文件"),!1;for(var t=0;t<this.uploadFile.length;t++){var e=this.file[t];this.$refs.upload.post(e)}},uploadSuccess:function(t,e,a){window.console.log(t),window.console.log(e),window.console.log(a)}}}),c={name:"xyhmxlbCont",data:function(){return{activeIndex:0}},components:{xyhmxlb:l,xyhmxlbUpload:Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Upload",{ref:"upload",attrs:{multiple:"","before-upload":t.handleUpload,"show-upload-list":!1,"on-success":t.uploadSuccess,action:"http://18.4.17.20:8081/protocolAccountDetails/importexcel"}},[a("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline"}},[t._v("浏览")])],1),t._l(t.file,function(e,n){return a("div",[t._v("文件名称: "+t._s(e.name)+"\n        "),a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.delectFile(e.keyID)}}},[t._v("X")]),0===n?a("Button",{staticStyle:{"margin-left":"30px"},attrs:{size:"small",type:"primary"},on:{click:t.upload}},[t._v("上传")]):t._e()],1)})],2)},[],!1,null,null,null).exports},methods:{onTabClick:function(t){this.activeIndex=t}}},u=Object(o.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Tabs",{attrs:{type:"card"},on:{"tab-click":t.onTabClick},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("TabPane",{attrs:{label:"协议户明细列表"}},[a("xyhmxlb")],1),a("TabPane",{attrs:{label:"明细批量导入"}},[a("xyhmxlbUpload")],1)],1)},[],!1,null,"ff51a868",null);e.default=u.exports},4191:function(t,e,a){},"5d6b":function(t,e,a){var n=a("e53d").parseInt,i=a("a1ce").trim,r=a("e692"),o=/^[-+]?0[xX]/;t.exports=8!==n(r+"08")||22!==n(r+"0x16")?function(t,e){var a=i(String(t),3);return n(a,e>>>0||(o.test(a)?16:10))}:n},"63b6":function(t,e,a){var n=a("e53d"),i=a("584a"),r=a("d864"),o=a("35e8"),l=a("07e3"),s="prototype",c=function(t,e,a){var u,d,p,f=t&c.F,h=t&c.G,m=t&c.S,v=t&c.P,g=t&c.B,x=t&c.W,y=h?i:i[e]||(i[e]={}),b=y[s],D=h?n:m?n[e]:(n[e]||{})[s];for(u in h&&(a=e),a)(d=!f&&D&&void 0!==D[u])&&l(y,u)||(p=d?D[u]:a[u],y[u]=h&&"function"!=typeof D[u]?a[u]:g&&d?r(p,n):x&&D[u]==p?function(t){var e=function(e,a,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,a)}return new t(e,a,n)}return t.apply(this,arguments)};return e[s]=t[s],e}(p):v&&"function"==typeof p?r(Function.call,p):p,v&&((y.virtual||(y.virtual={}))[u]=p,t&c.R&&b&&!b[u]&&o(b,u,p)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},7445:function(t,e,a){var n=a("63b6"),i=a("5d6b");n(n.G+n.F*(parseInt!=i),{parseInt:i})},"794b":function(t,e,a){t.exports=!a("8e60")&&!a("294c")(function(){return 7!=Object.defineProperty(a("1ec9")("div"),"a",{get:function(){return 7}}).a})},"79aa":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"8e60":function(t,e,a){t.exports=!a("294c")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a1ce:function(t,e,a){var n=a("63b6"),i=a("25eb"),r=a("294c"),o=a("e692"),l="["+o+"]",s=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),u=function(t,e,a){var i={},l=r(function(){return!!o[t]()||"​"!="​"[t]()}),s=i[t]=l?e(d):o[t];a&&(i[a]=s),n(n.P+n.F*l,"String",i)},d=u.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(s,"")),2&e&&(t=t.replace(c,"")),t};t.exports=u},aebd:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},b9e9:function(t,e,a){a("7445"),t.exports=a("584a").parseInt},cec2:function(t,e,a){"use strict";var n=a("4191");a.n(n).a},d864:function(t,e,a){var n=a("79aa");t.exports=function(t,e,a){if(n(t),void 0===e)return t;switch(a){case 1:return function(a){return t.call(e,a)};case 2:return function(a,n){return t.call(e,a,n)};case 3:return function(a,n,i){return t.call(e,a,n,i)}}return function(){return t.apply(e,arguments)}}},d9f6:function(t,e,a){var n=a("e4ae"),i=a("794b"),r=a("1bc3"),o=Object.defineProperty;e.f=a("8e60")?Object.defineProperty:function(t,e,a){if(n(t),e=r(e,!0),n(a),i)try{return o(t,e,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(t[e]=a.value),t}},e4ae:function(t,e,a){var n=a("f772");t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},e53d:function(t,e){var a=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(t,e,a){t.exports=a("b9e9")},f772:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}}}]);