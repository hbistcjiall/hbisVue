(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e718e9f8"],{a6a5:function(e,t,a){"use strict";var l=a("c5f0");a.n(l).a},c5f0:function(e,t,a){},e0d1:function(e,t,a){"use strict";a.r(t),a("386d"),a("6b54"),a("c5f6");var l={name:"zxlmxtj_bb",data:function(){return{loading:!0,downloadUrl:"",indeterminate:!0,checkAll:!1,dataCount:0,pageSize:10,xia:0,model1:"",cplbList:[{label:"全部",value:""},{label:"热板",value:"热板"},{label:"冷板",value:"冷板"},{label:"宽厚板",value:"宽厚板"},{label:"棒线",value:"棒线"},{label:"型带",value:"型带"}],startTime:new Date,endTime:new Date,switchTime:!0,model2:"",ghfsList:[{label:"全部",value:""},{label:"直供",value:"直供"},{label:"三方",value:"三方"},{label:"自办公司",value:"自办公司"}],checkText:["唐钢","邯钢","宣钢","承钢","舞钢"],resDatas:[],columns12:[{title:"序号",align:"center",type:"index"},{title:"统计月份",align:"center",key:"STATISTICSTIME"},{title:"用户名称（全称）",align:"center",key:"ACCOUNTNAME"},{title:"供货方式",align:"center",key:"SUPPLYMODE"},{title:"品种钢",align:"center",key:"VARIETIES"},{title:"主销售区域",align:"center",key:"MAINSALESREGIONAL"},{title:"辅助销售区域一",align:"center",key:"AIDEDSALESREGIONALONE",render:function(e,t){return t.row[t.column.key]=null==t.row[t.column.key]?"0.00":t.row[t.column.key],e("span",Number(t.row[t.column.key]).toFixed(2))}},{title:"辅助销售区域二",align:"center",key:"AIDEDSALESREGIONALTWO",render:function(e,t){return t.row[t.column.key]=null==t.row[t.column.key]?"0.00":t.row[t.column.key],e("span",Number(t.row[t.column.key]).toFixed(2))}},{title:"钢厂",align:"center",key:"STEELMILLS"},{title:"年协议量（吨）",align:"center",key:"ANNUALAGREEMENTVOLUME",render:function(e,t){return t.row[t.column.key]=null==t.row[t.column.key]?"0.00":t.row[t.column.key],e("span",Number(t.row[t.column.key]).toFixed(2))}},{title:"当期协议销量（吨）",align:"center",key:"ORDERMOUNT",render:function(e,t){return t.row[t.column.key]=null==t.row[t.column.key]?"0.00":t.row[t.column.key],e("span",Number(t.row[t.column.key]).toFixed(2))}},{title:"当期执行集团协议加值销量（吨）",align:"center",key:"PROTOCOLORDERMOUNT",render:function(e,t){return t.row[t.column.key]=null==t.row[t.column.key]?"0.00":t.row[t.column.key],e("span",Number(t.row[t.column.key]).toFixed(2))}}]}},created:function(){this.handleListApproveHistory()},methods:{handleListApproveHistory:function(){var e=this;this.loading=!0;var t="beginTime=",a="&endTime=";this.switchTime?(t+=this.utils.formatMonthStart(this.startTime),a+=this.utils.formatMonthStart(this.endTime)):(t+=this.utils.formatYearStart(this.year),a+=this.utils.formatYearEnd(this.year));var l="idList="+this.checkText.toString(),i={page:"0",limit:"10",supplyMode:this.model2,varieties:this.model1};fetch(this.$store.state.fetchPath+"/protocolAccountDetailsStatistics/list",{method:"POST",headers:this.$store.state.fetchHeader,body:t+a+"&"+this.utils.formatParams(i)+"&"+l,credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(t){t=t&&0<t.length?JSON.parse(t):[],e.downLoad(),e.resDatas=t.list.data,e.loading=!1})},changepage:function(e){this.dictData.page=e,this.handleListApproveHistory()},handlePageSize:function(e){this.xsztylhztdyData.limit=e,this.search()},search:function(){this.handleListApproveHistory()},downLoad:function(){var e="beginTime=",t="&endTime=";this.switchTime?(e+=this.utils.formatMonthStart(this.startTime),t+=this.utils.formatMonthStart(this.endTime)):(e+=this.utils.formatYearStart(this.year),t+=this.utils.formatYearEnd(this.year));var a="idList="+this.checkText.toString(),l={supplyMode:this.model2,varieties:this.model1};this.downloadUrl=this.$store.state.fetchPath+"/protocolAccountDetailsStatistics/exportSubsidiaryVarietySteel?"+e+t+"&"+this.utils.formatParams(l)+"&"+a},handleCheckAll:function(){this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?this.checkText=["唐钢","邯钢","宣钢","承钢","舞钢"]:this.checkText=[]},checkAllGroupChange:function(e){5===e.length?(this.indeterminate=!1,this.checkAll=!0):(0<e.length?this.indeterminate=!0:this.indeterminate=!1,this.checkAll=!1)}}},i=(a("a6a5"),a("2877")),n=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"divStyle"},[a("label",{staticStyle:{float:"left"}},[e._v("产品类别：\n            "),a("Select",{staticStyle:{width:"120px"},model:{value:e.model1,callback:function(t){e.model1=t},expression:"model1"}},e._l(e.cplbList,function(t){return a("Option",{key:t.label,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("label",{staticStyle:{float:"left","margin-left":"20px"}},[e._v("供货方式：\n            "),a("Select",{staticStyle:{width:"120px"},model:{value:e.model2,callback:function(t){e.model2=t},expression:"model2"}},e._l(e.ghfsList,function(t){return a("Option",{key:t.label,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("label",{staticClass:"yfgc",staticStyle:{"margin-left":"20px","margin-top":"5px"}},[e._v("统计月份：\n        ")]),a("DatePicker",{staticStyle:{width:"120px",float:"left","margin-left":"10px"},attrs:{type:"month",placeholder:"起始月份",editable:!1,clearable:!1},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),a("DatePicker",{staticStyle:{width:"120px",float:"left"},attrs:{type:"month",placeholder:"结束月份",editable:!1,clearable:!1},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}),a("label",{staticStyle:{float:"left","margin-left":"10px","margin-top":"6px"}},[e._v("钢厂:")]),a("Checkbox",{staticStyle:{float:"left","margin-left":"20px","margin-top":"6px"},attrs:{indeterminate:e.indeterminate,value:e.checkAll},nativeOn:{click:function(t){return t.preventDefault(),e.handleCheckAll(t)}}},[e._v("全选\n        ")]),a("CheckboxGroup",{staticClass:"yfgc",on:{"on-change":e.checkAllGroupChange},model:{value:e.checkText,callback:function(t){e.checkText=t},expression:"checkText"}},[a("Checkbox",{attrs:{label:"唐钢",value:"唐钢"}}),a("Checkbox",{attrs:{label:"邯钢",value:"邯钢"}}),a("Checkbox",{attrs:{label:"宣钢",value:"宣钢"}}),a("Checkbox",{attrs:{label:"承钢",value:"承钢"}}),a("Checkbox",{attrs:{label:"舞钢",value:"舞钢"}})],1)],1),a("div",{staticStyle:{both:"clear","margin-left":"-900px"}},[a("Button",{staticStyle:{"margin-right":"20px"},attrs:{icon:"ios-search",type:"primary"},on:{click:function(t){return e.search()}}},[e._v("查询")]),a("a",{attrs:{href:e.downloadUrl}},[a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[e._v("导出")])],1)],1),a("Table",{ref:"table",staticStyle:{"margin-top":"20px"},attrs:{border:"",stripe:"",columns:e.columns12,data:e.resDatas,loading:e.loading},scopedSlots:e._u([{key:"name",fn:function(t){var l=t.row;return[a("strong",[e._v(e._s(l.name))])]}}])}),a("Page",{staticClass:"paging",staticStyle:{"margin-top":"20px"},attrs:{total:e.dataCount,"page-size":e.pageSize,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changepage,"on-page-size-change":e.handlePageSize}})],1)},[],!1,null,"7dc3f106",null);t.default=n.exports}}]);