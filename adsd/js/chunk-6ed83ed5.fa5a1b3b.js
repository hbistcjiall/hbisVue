(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6ed83ed5"],{"2fa8":function(t,e,s){"use strict";var i=s("d1a0");s.n(i).a},bd47:function(t,e,s){"use strict";s.r(e);var i={name:"jswcqk",data:function(){return{eData:"",isA:!0,isB:!1,isC:!0,isD:!1,isE:!0,isF:!1,loading:!0,active:"",SubStarTime_month:"",SubStarTime_year:"",option:{},column:{chart:{zoomType:"xy"},colors:["#3689cf","#cc0000"],title:{text:""},subtitle:{text:""},xAxis:[{categories:[],crosshair:!0}],yAxis:[{labels:{format:"{value}",style:{color:""}},title:{text:"结算均价(元)",style:{color:""}}},{title:{text:"结算(吨)",style:{color:""}},labels:{format:"{value}",style:{color:""}},opposite:!0}],tooltip:{shared:!0},plotOptions:{column:{dataLabels:{enabled:!0}},spline:{dataLabels:{enabled:!0,color:"#cc0000"}}},credits:{enabled:!1},legend:{y:20},series:[{name:"结算（吨）",type:"column",yAxis:1,data:[]},{name:"结算均价（元）",type:"spline",data:[]}]},pieOption:{},pie:{chart:{type:"pie"},colors:["#75b9e6","#4aa3de","#c1e0ff","#77bbff","#33577b","#6ba6e0","#3d8ec4","#4fc1e9","#96bdd3","#73bbc4"],title:{text:""},subtitle:{text:""},tooltip:{percentageDecimals:2,headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}</b><br/>'},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.y:.2f}吨"},showInLegend:!0}},credits:{enabled:!1},series:[{name:"结算量",data:[]}]},active1:0,zt:1,todos:[{text:"品种"},{text:"钢厂"}],resDatas:[],resDatas1:[],columns:[{title:"总量",key:"zl",align:"center",children:[{title:"品种",key:"NAME",align:"center"},{title:"完成量",key:"JSL",align:"center"}]},{title:"品种钢量",key:"pzgl",align:"center",children:[{title:"品种钢",key:"PZGL",align:"center"},{title:"完成比例",key:"WCL",align:"center"}]}]}},components:{XChart:s("e9b1").a},mounted:function(){this.getTime(0,1)},created:function(){this.getIndex()},methods:{getTime:function(t){var e=this,s={zt:this.zt};this.loading=!0,this.eData=t,this.pieOption={},this.option={};var i="startTime=",a="&endTime=";switch(t){case 0:i+=this.utils.formatMonthStart(),a+=this.utils.formatMonthEnd(),this.SubStarTime_year=i.substring(10,14),this.SubStarTime_month=i.substring(15,17),this.pie.title.text='<span style="font-size:14px;color:black;font-weight: bold">'+this.SubStarTime_year+"年"+this.SubStarTime_month+"月结算完成情况（品种）</span>",this.column.title.text='<span style="font-size:14px;color:black;font-weight: bold">'+this.SubStarTime_year+"年"+this.SubStarTime_month+"月结算完成情况（品种）</span>",this.isA=!1,this.isB=!0,this.isC=!0,this.isD=!1,this.isE=!0,this.isF=!1;break;case 1:this.isA=!0,this.isB=!1,this.isC=!1,this.isD=!0,this.isE=!0,this.isF=!1,i+=this.utils.formatMonthBefore(),a+=this.utils.formatMonthStart(),this.SubStarTime_year=i.substring(10,14),this.SubStarTime_month=i.substring(15,17),this.pie.title.text='<span style="font-size:14px;color:black;font-weight: bold">'+this.SubStarTime_year+"年"+this.SubStarTime_month+"月结算完成情况（品种）</span>",this.column.title.text='<span style="font-size:14px;color:black;font-weight: bold">'+this.SubStarTime_year+"年"+this.SubStarTime_month+"月结算完成情况（品种）</span>";break;case 2:this.isA=!0,this.isB=!1,this.isC=!0,this.isD=!1,this.isE=!1,this.isF=!0,i+=this.utils.formatYearStart(new Date),a+=this.utils.formatYearEnd(new Date),this.SubStarTime_year=i.substring(10,14),this.pie.title.text='<span style="font-size:14px;color:black;font-weight: bold">'+this.SubStarTime_year+"年结算完成情况（品种）</span>",this.column.title.text='<span style="font-size:14px;color:black;font-weight: bold">'+this.SubStarTime_year+"年结算完成情况（品种）</span>"}fetch(this.$store.state.fetchPath+"/scm-steel-settle/getpzjszl",{method:"POST",headers:this.$store.state.fetchHeader,body:i+a,credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(t){if(0<(t=t&&0<t.length?JSON.parse(t):[]).length){for(var s=[],i=[],a=[],n=[],o=0;o<t.length;o++)s.push(t[o].JSL),i.push(t[o].JSJJ),a.push(t[o].VARIETY),n.push({name:t[o].VARIETY,y:t[o].JSL});e.column.series[1].data=i,e.column.series[0].data=s,e.column.xAxis[0].categories=a,e.pie.series[0].data=n}else e.column.series[1].data=[0,0,0,0,0],e.column.series[0].data=[0,0,0,0,0],e.column.xAxis[0].categories=["热板","冷板","宽厚板","棒线","型带"],e.pie.series[0].data=[{name:"热板",y:0},{name:"冷板",y:0},{name:"宽厚板",y:0},{name:"棒线",y:0},{name:"型带",y:0}];e.option=e.column,e.pieOption=e.pie}),fetch(this.$store.state.fetchPath+"/scm-steel-settle/getpzgjswc",{method:"POST",headers:this.$store.state.fetchHeader,body:i+a+"&"+this.utils.formatParams(s),credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(t){t=t&&0<t.length?JSON.parse(t):[],e.resDatas=t;for(var s=0;s<e.resDatas.length;s++)e.resDatas[s].WCL=e.resDatas[s].WCL+"%";e.loading=!1})},getIndex:function(){var t=this;this.loading=!0;var e=this.eData,s={zt:this.zt},i="startTime=",a="&endTime=";switch(e){case 0:i+=this.utils.formatMonthStart(),a+=this.utils.formatMonthEnd();break;case 1:i+=this.utils.formatMonthBefore(),a+=this.utils.formatMonthStart();break;case 2:i+=this.utils.formatYearStart(new Date),a+=this.utils.formatYearEnd(new Date)}fetch(this.$store.state.fetchPath+"/scm-steel-settle/getpzgjswc",{method:"POST",headers:this.$store.state.fetchHeader,body:i+a+"&"+this.utils.formatParams(s),credentials:"include"}).then(function(e){if(200==e.status)return e.text();t.$Message.error("请求失败！")}).then(function(e){e=e&&0<e.length?JSON.parse(e):[],t.resDatas=e;for(var s=0;s<t.resDatas.length;s++)t.resDatas[s].WCL=t.resDatas[s].WCL+"%";t.loading=!1})},tabsClick:function(t){this.active1=t,this.zt=this.active1+1,0==t?this.columns[0].children[0].title="品种":1==t&&(this.columns[0].children[0].title="钢厂"),this.getIndex()}}},a=(s("2fa8"),s("2877")),n=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Row",{staticStyle:{width:"330px",margin:"0px auto"}},[s("div",{class:{"class-a":t.isA,"class-b":t.isB},attrs:{type:"primary"},on:{click:function(e){return t.getTime(0)}}},[t._v("本月")]),s("div",{class:{"class-c":t.isC,"class-d":t.isD},attrs:{type:"primary"},on:{click:function(e){return t.getTime(1)}}},[t._v("上月")]),s("div",{class:{"class-e":t.isE,"class-f":t.isF},attrs:{type:"primary"},on:{click:function(e){return t.getTime(2)}}},[t._v("本年")])]),s("div",{staticClass:"chartStyle"},[s("div",{staticStyle:{width:"50%",float:"left","border-right":"1px solid #3497db"}},[s("x-chart",{attrs:{id:"pieValue",option:t.pieOption}})],1),s("div",{staticStyle:{width:"49%",float:"right"}},[s("x-chart",{attrs:{id:"columnValue",option:t.option}})],1)]),s("div",{staticStyle:{"margin-top":"500px"}},[s("div",{staticStyle:{width:"100%",height:"30px","font-size":"16px","font-weight":"bold","padding-left":"10px","text-align":"left",background:"#dddddd","line-height":"30px","margin-bottom":"10px"}},[t._v("品种钢结算完成情况")]),s("div",{staticClass:"PZGC",staticStyle:{overflow:"hidden"}},[s("ul",{staticStyle:{width:"100px",float:"right"}},t._l(t.todos,function(e,i){return s("li",{class:{blue:i==t.active1},on:{click:function(e){return t.tabsClick(i,e)}}},[t._v(" "+t._s(e.text))])}),0)]),s("Table",{attrs:{loading:t.loading,columns:t.columns,data:t.resDatas,border:"",height:"500"},scopedSlots:t._u([{key:"name",fn:function(e){var i=e.row;return[s("strong",[t._v(t._s(i.name))])]}}])})],1)],1)},[],!1,null,"e6af727e",null);e.default=n.exports},d1a0:function(t,e,s){}}]);